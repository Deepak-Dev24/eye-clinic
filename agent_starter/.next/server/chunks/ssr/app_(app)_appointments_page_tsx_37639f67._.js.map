{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Documents/livekinwithreact/agent_starter/app/%28app%29/appointments/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\n\ninterface Appointment {\n  id: number;\n  full_name: string;\n  phone: string;\n  appointment_date: string;\n  appointment_time: string;\n  reason: string;\n}\n\nexport default function AppointmentsPage() {\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [editing, setEditing] = useState<Appointment | null>(null);\n\n  // ‚úÖ Fetch appointments on load\n  useEffect(() => {\n    fetch(\"http://localhost:5000/api/appointments\")\n      .then((res) => res.json())\n      .then((data) => setAppointments(data))\n      .catch((err) => console.error(\"Error fetching appointments:\", err))\n      .finally(() => setLoading(false));\n  }, []);\n\n  // ‚úÖ Delete an appointment\n  const handleDelete = async (id: number) => {\n    if (!confirm(\"Are you sure you want to delete this appointment?\")) return;\n\n    try {\n      const res = await fetch(`http://localhost:5000/api/appointments/${id}`, {\n        method: \"DELETE\",\n      });\n      if (res.ok) {\n        setAppointments((prev) => prev.filter((a) => a.id !== id));\n      } else {\n        alert(\"Failed to delete appointment.\");\n      }\n    } catch (err) {\n      console.error(\"Error deleting appointment:\", err);\n    }\n  };\n\n  // ‚úÖ Update an appointment\n  const handleUpdate = async (updated: Appointment) => {\n    try {\n      const res = await fetch(\n        `http://localhost:5000/api/appointments/${updated.id}`,\n        {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(updated),\n        }\n      );\n\n      if (res.ok) {\n        setAppointments((prev) =>\n          prev.map((a) => (a.id === updated.id ? updated : a))\n        );\n        setEditing(null);\n      } else {\n        alert(\"Failed to update appointment.\");\n      }\n    } catch (err) {\n      console.error(\"Error updating appointment:\", err);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center text-gray-600 text-lg\">\n        Loading appointments...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6 mt-24\">\n      <h1 className=\"text-2xl font-bold mb-6 text-gray-800\">\n        All Appointments\n      </h1>\n\n      {appointments.length === 0 ? (\n        <p className=\"text-gray-500\">No appointments found.</p>\n      ) : (\n        <div className=\"space-y-4\">\n          {appointments.map((a) =>\n            editing?.id === a.id ? (\n              //‚úèÔ∏è Edit Form\n              <div\n                key={a.id}\n                className=\"rounded-lg bg-white p-4 shadow-md border border-gray-200\"\n              >\n                <h2 className=\"font-semibold mb-2 text-gray-700\">Edit Appointment</h2>\n                <div className=\"space-y-2\">\n                  <input\n                    type=\"text\"\n                    value={editing.full_name}\n                    onChange={(e) =>\n                      setEditing({ ...editing, full_name: e.target.value })\n                    }\n                    placeholder=\"Full name\"\n                    className=\"w-full border rounded p-2\"\n                  />\n                  <input\n                    type=\"text\"\n                    value={editing.phone}\n                    onChange={(e) =>\n                      setEditing({ ...editing, phone: e.target.value })\n                    }\n                    placeholder=\"Phone\"\n                    className=\"w-full border rounded p-2\"\n                  />\n                  <input\n                    type=\"date\"\n                    value={editing.appointment_date}\n                    onChange={(e) =>\n                      setEditing({ ...editing, appointment_date: e.target.value })\n                    }\n                    className=\"w-full border rounded p-2\"\n                  />\n                  <input\n                    type=\"time\"\n                    value={editing.appointment_time}\n                    onChange={(e) =>\n                      setEditing({ ...editing, appointment_time: e.target.value })\n                    }\n                    className=\"w-full border rounded p-2\"\n                  />\n                  <textarea\n                    value={editing.reason}\n                    onChange={(e) =>\n                      setEditing({ ...editing, reason: e.target.value })\n                    }\n                    placeholder=\"Reason\"\n                    className=\"w-full border rounded p-2\"\n                  />\n                </div>\n\n                <div className=\"mt-3 flex gap-2\">\n                  <button\n                    onClick={() => handleUpdate(editing)}\n                    className=\"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700\"\n                  >\n                    Save\n                  </button>\n                  <button\n                    onClick={() => setEditing(null)}\n                    className=\"bg-gray-300 px-3 py-1 rounded hover:bg-gray-400\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            ) : (\n              // üìã View Card\n              <div\n                key={a.id}\n                className=\"rounded-lg bg-white p-4 shadow-md border border-gray-200 hover:shadow-lg transition-shadow duration-300\"\n              >\n                <p>\n                  <strong>Name:</strong> {a.full_name}\n                </p>\n                <p>\n                  <strong>Phone:</strong> {a.phone}\n                </p>\n                <p>\n                  <strong>Date:</strong> {a.appointment_date}\n                </p>\n                <p>\n                  <strong>Time:</strong> {a.appointment_time}\n                </p>\n                <p>\n                  <strong>Reason:</strong> {a.reason}\n                </p>\n\n                <div className=\"mt-3 flex gap-2\">\n                  <button\n                    onClick={() => setEditing(a)}\n                    className=\"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600\"\n                  >\n                    Edit\n                  </button>\n                  <button\n                    onClick={() => handleDelete(a.id)}\n                    className=\"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            )\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}